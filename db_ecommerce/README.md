# Desafio de Banco de Dados ‚Äì E-commerce



### 1. Objetivo

O objetivo deste documento √© apresentar o **esquema conceitual e f√≠sico** de um sistema de E-commerce, detalhando as entidades, atributos e relacionamentos necess√°rios para o correto funcionamento da plataforma, contemplando clientes, produtos, fornecedores, vendedores terceiros, pedidos, pagamentos e entregas.

<br />

### 2. Escopo e Contexto

O sistema visa gerenciar todo o ciclo de compra e venda em uma plataforma online, desde o cadastro do cliente e dos produtos at√© o processamento do pedido, pagamento e entrega. A solu√ß√£o abrange:

- Cadastro de clientes pessoa f√≠sica (CPF) e pessoa jur√≠dica (CNPJ).
- Cadastro de endere√ßos de clientes (residencial, comercial, entrega).
- Cadastro de fornecedores e vendedores terceiros.
- Cadastro e gerenciamento de produtos.
- Cria√ß√£o e controle de pedidos, incluindo m√∫ltiplos produtos.
- Registro das formas de pagamento associadas a cada pedido.
- Controle do processo de entrega com status e c√≥digo de rastreio.

<br />

### 3. Narrativa

- O cliente pode ser **Pessoa F√≠sica (CPF)** ou **Pessoa Jur√≠dica (CNPJ)**, mas nunca os dois ao mesmo tempo.
- O cliente possui um ou mais endere√ßos, que influenciam no c√°lculo do valor do frete.
- Produtos s√£o cadastrados na plataforma com v√≠nculo a um fornecedor.
- Produtos podem ser vendidos tamb√©m por **vendedores terceiros**, que informam a quantidade dispon√≠vel.
- Cada cliente pode realizar m√∫ltiplos pedidos, que s√£o compostos por um ou mais produtos.
- O pedido cont√©m informa√ß√µes como data, status, valor do frete, possibilidade de cancelamento e prazo para devolu√ß√£o.
- Cada pedido pode ter um ou mais pagamentos cadastrados (cart√£o, pix, boleto).
- A entrega de cada pedido √© registrada com status e c√≥digo de rastreio.

<br />

### 4. Observa√ß√µes T√©cnicas

- O sistema deve garantir a **integridade referencial** entre clientes, endere√ßos, pedidos, produtos, pagamentos e entregas.
- As tabelas de associa√ß√£o (`tb_pedidos_produtos`, `tb_produtos_vendedores`) utilizam **chaves compostas** para representar corretamente os relacionamentos **N:N**.
- O modelo segue boas pr√°ticas de nomenclatura: banco `db_ecommerce`, tabelas no plural (`tb_clientes`, `tb_pedidos`, etc.), PK como `id BIGINT AUTO_INCREMENT`.

<br />

### 5. Modelo F√≠sico

<br />

**Modelo Original**

<div align="center"><img src="https://i.imgur.com/5PTh3DL.png" alt="Diagrama - Modelo Conceitual"></div>

<br />

**Modelo Atualizado**

<div align="center"><img src="https://i.imgur.com/yvbS7gk.png" alt="Diagrama - Modelo Conceitual"></div>

<br />

### 6. Dicion√°rio de Dados ‚Äì Sistema de E-commerce

<br />

#### **Tabela: tb_clientes**

| Campo    | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                |
| -------- | --------------------- | ----------- | ----- | ------------------------ |
| id       | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador do cliente |
| nome     | VARCHAR(255)          | Sim         |       | Nome completo do cliente |
| email    | VARCHAR(255) UNIQUE   | N√£o         |       | E-mail de contato        |
| telefone | VARCHAR(50)           | N√£o         |       | Telefone de contato      |

<br />

#### **Tabela: tb_clientes_pf**

| Campo      | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                    |
| ---------- | --------------------- | ----------- | ----- | ---------------------------- |
| id         | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador √∫nico          |
| cliente_id | BIGINT                | Sim         | üî∂     | Refer√™ncia ao cliente        |
| cpf        | VARCHAR(14) UNIQUE    | Sim         |       | CPF do cliente pessoa f√≠sica |

<br />

#### **Tabela: tb_clientes_pj**

| Campo        | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                       |
| ------------ | --------------------- | ----------- | ----- | ------------------------------- |
| id           | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador √∫nico             |
| cliente_id   | BIGINT                | Sim         | üî∂     | Refer√™ncia ao cliente           |
| cnpj         | VARCHAR(18) UNIQUE    | Sim         |       | CNPJ do cliente pessoa jur√≠dica |
| razao_social | VARCHAR(255)          | Sim         |       | Raz√£o social da empresa         |

<br />

#### **Tabela: tb_enderecos**

| Campo      | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                 |
| ---------- | --------------------- | ----------- | ----- | ------------------------- |
| id         | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador do endere√ßo |
| cliente_id | BIGINT                | Sim         | üî∂     | Cliente associado         |
| logradouro | VARCHAR(255)          | Sim         |       | Rua, n√∫mero, complemento  |
| cidade     | VARCHAR(100)          | Sim         |       | Cidade do endere√ßo        |
| estado     | VARCHAR(2)            | Sim         |       | Unidade federativa        |
| cep        | VARCHAR(10)           | Sim         |       | CEP                       |
| tipo       | VARCHAR(50)           | N√£o         |       | Tipo (residencial, etc.)  |

<br />

#### **Tabela: tb_fornecedores**

| Campo        | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o          |
| ------------ | --------------------- | ----------- | ----- | ------------------ |
| id           | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador      |
| razao_social | VARCHAR(255)          | Sim         |       | Nome/Raz√£o social  |
| cnpj         | VARCHAR(18) UNIQUE    | Sim         |       | CNPJ do fornecedor |

<br />

#### **Tabela: tb_produtos**

| Campo         | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                 |
| ------------- | --------------------- | ----------- | ----- | ------------------------- |
| id            | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador do produto  |
| descricao     | VARCHAR(255)          | Sim         |       | Nome/descri√ß√£o do produto |
| categoria     | VARCHAR(100)          | N√£o         |       | Categoria do produto      |
| valor         | DECIMAL(10,2)         | Sim         |       | Valor unit√°rio            |
| fornecedor_id | BIGINT                | Sim         | üî∂     | Fornecedor do produto     |

<br />

#### **Tabela: tb_vendedores_terceiros**

| Campo        | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o         |
| ------------ | --------------------- | ----------- | ----- | ----------------- |
| id           | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador     |
| razao_social | VARCHAR(255)          | Sim         |       | Nome/Raz√£o social |
| local        | VARCHAR(255)          | N√£o         |       | Localiza√ß√£o       |

<br />

#### **Tabela: tb_produtos_vendedores** (N:N Produtos ‚Üî Vendedores Terceiros)

| Campo                | Tipo   | Obrigat√≥rio | PK/FK | Descri√ß√£o                        |
| -------------------- | ------ | ----------- | ----- | -------------------------------- |
| vendedor_terceiro_id | BIGINT | Sim         | üîëüî∂    | Vendedor associado ao produto    |
| produto_id           | BIGINT | Sim         | üîëüî∂    | Produto associado                |
| quantidade           | INT    | Sim         |       | Quantidade dispon√≠vel para venda |

<br />

#### **Tabela: tb_pedidos**

| Campo           | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                    |
| --------------- | --------------------- | ----------- | ----- | ---------------------------- |
| id              | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador do pedido      |
| cliente_id      | BIGINT                | Sim         | üî∂     | Cliente que realizou         |
| endereco_id     | BIGINT                | Sim         | üî∂     | Endere√ßo de entrega          |
| data_pedido     | DATETIME              | Sim         |       | Data da compra               |
| status          | VARCHAR(50)           | N√£o         |       | Status do pedido             |
| valor_frete     | DECIMAL(10,2)         | N√£o         |       | Valor do frete               |
| prazo_devolucao | INT                   | N√£o         |       | Prazo em dias para devolu√ß√£o |
| cancelado       | BOOLEAN               | N√£o         |       | Indicador de cancelamento    |

<br />

#### **Tabela: tb_pedidos_produtos** (N:N Pedidos ‚Üî Produtos)

| Campo      | Tipo   | Obrigat√≥rio | PK/FK | Descri√ß√£o                  |
| ---------- | ------ | ----------- | ----- | -------------------------- |
| pedido_id  | BIGINT | Sim         | üîëüî∂    | Pedido associado           |
| produto_id | BIGINT | Sim         | üîëüî∂    | Produto inclu√≠do no pedido |
| quantidade | INT    | Sim         |       | Quantidade do produto      |

<br />

#### **Tabela: tb_pagamentos**

| Campo          | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                  |
| -------------- | --------------------- | ----------- | ----- | -------------------------- |
| id             | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador do pagamento |
| pedido_id      | BIGINT                | Sim         | üî∂     | Pedido relacionado         |
| tipo           | VARCHAR(50)           | Sim         |       | Tipo de pagamento          |
| status         | VARCHAR(50)           | N√£o         |       | Status do pagamento        |
| valor          | DECIMAL(10,2)         | Sim         |       | Valor pago                 |
| data_pagamento | DATETIME              | N√£o         |       | Data do pagamento          |

<br />

#### **Tabela: tb_entregas**

| Campo           | Tipo                  | Obrigat√≥rio | PK/FK | Descri√ß√£o                |
| --------------- | --------------------- | ----------- | ----- | ------------------------ |
| id              | BIGINT AUTO_INCREMENT | Sim         | üîë     | Identificador da entrega |
| pedido_id       | BIGINT                | Sim         | üî∂     | Pedido associado         |
| status          | VARCHAR(50)           | N√£o         |       | Status da entrega        |
| codigo_rastreio | VARCHAR(50)           | N√£o         |       | C√≥digo de rastreio       |
| data_envio      | DATETIME              | N√£o         |       | Data de envio            |
| data_entrega    | DATETIME              | N√£o         |       | Data de entrega          |

